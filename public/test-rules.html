<!DOCTYPE html>
<html>
<head>
    <title>Firebase Rules Test</title>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <h1>Firebase Rules Test</h1>
    <button onclick="testRules()">Test Rules</button>
    <div id="results"></div>

    <script>
        // Your Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyCHiS1JxbIm5zclg1QxM-i8DvHPeWMPne0",
            authDomain: "medconnect-2.firebaseapp.com",
            projectId: "medconnect-2",
            storageBucket: "medconnect-2.firebasestorage.app",
            messagingSenderId: "464755135042",
            appId: "1:464755135042:web:ac00e07a1aa0721683d3db",
            measurementId: "G-1Q7MTPV8XE"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function testRules() {
            const results = document.getElementById('results');
            results.innerHTML = '<h3>Testing Firebase Rules...</h3>';

            // Test 1: Try to read appointments (should fail)
            try {
                await db.collection('appointments').get();
                results.innerHTML += '<p>‚ùå SECURITY ISSUE: Appointments readable without auth</p>';
            } catch (error) {
                results.innerHTML += '<p>‚úÖ Good: Appointments blocked - ' + error.code + '</p>';
            }

            // Test 2: Try to read doctors (depends on your rules)
            try {
                await db.collection('doctors').get();
                results.innerHTML += '<p>üìã Doctors accessible (check if this is intended)</p>';
            } catch (error) {
                results.innerHTML += '<p>üîí Doctors blocked - ' + error.code + '</p>';
            }

            // Test 3: Try to read users (should fail)
            try {
                await db.collection('users').get();
                results.innerHTML += '<p>‚ùå SECURITY ISSUE: Users readable without auth</p>';
            } catch (error) {
                results.innerHTML += '<p>‚úÖ Good: Users blocked - ' + error.code + '</p>';
            }

            results.innerHTML += '<h3>Test Complete!</h3>';
        }
    </script>
</body>
</html>